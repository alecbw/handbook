
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="http://handbook.vantage.sh/aws/services/ecr-pricing/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>ECR Pricing | Vantage Cloud Cost Handbook - Cloud Cost Handbook</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
  



  
  



  <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TEYTN5V029"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-TEYTN5V029",{page_path:t.pathname})})})</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TEYTN5V029"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#summary" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Cloud Cost Handbook" class="md-header__button md-logo" aria-label="Cloud Cost Handbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cloud Cost Handbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ECR Pricing | Vantage Cloud Cost Handbook
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Cloud Cost Handbook" class="md-nav__button md-logo" aria-label="Cloud Cost Handbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Cloud Cost Handbook
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://leaderboard.vantage.sh/" class="md-nav__link">
        Cost Leaderboard
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        General Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="General Concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          General Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/bill/" class="md-nav__link">
        Your Monthly Bill
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/regions/" class="md-nav__link">
        Regions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/budgets/" class="md-nav__link">
        Budgets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/rightsizing/" class="md-nav__link">
        Rightsizing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/savings-plans/" class="md-nav__link">
        Savings Plans
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/reserved-instances/" class="md-nav__link">
        Reserved Instances
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/tags/" class="md-nav__link">
        Tags
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        AWS Services
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="AWS Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          AWS Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ec2-pricing/" class="md-nav__link">
        EC2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ec2-other-pricing/" class="md-nav__link">
        EC2-Other
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          ECR
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        ECR
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pricing-dimensions" class="md-nav__link">
    Pricing Dimensions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-costs-per-ecr-repository" class="md-nav__link">
    Storage Costs per ECR Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lifecycle-policies" class="md-nav__link">
    Lifecycle Policies
  </a>
  
    <nav class="md-nav" aria-label="Lifecycle Policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-imagecountmorethan-lifeycle-policy" class="md-nav__link">
    Example imageCountMoreThan Lifeycle Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-sinceimagepushed-lifeycle-policy" class="md-nav__link">
    Example sinceImagePushed Lifeycle Policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../elasticache-pricing/" class="md-nav__link">
        ElastiCache
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cloudwatch-pricing/" class="md-nav__link">
        CloudWatch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cloudfront-pricing/" class="md-nav__link">
        CloudFront
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ebs-pricing/" class="md-nav__link">
        EBS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ecs-and-fargate-pricing/" class="md-nav__link">
        ECS & Fargate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../lambda-pricing/" class="md-nav__link">
        Lambda
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../rds-pricing/" class="md-nav__link">
        RDS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../route-53-pricing/" class="md-nav__link">
        Route 53
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../s3-pricing/" class="md-nav__link">
        S3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pricing-dimensions" class="md-nav__link">
    Pricing Dimensions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-costs-per-ecr-repository" class="md-nav__link">
    Storage Costs per ECR Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lifecycle-policies" class="md-nav__link">
    Lifecycle Policies
  </a>
  
    <nav class="md-nav" aria-label="Lifecycle Policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-imagecountmorethan-lifeycle-policy" class="md-nav__link">
    Example imageCountMoreThan Lifeycle Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-sinceimagepushed-lifeycle-policy" class="md-nav__link">
    Example sinceImagePushed Lifeycle Policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>ECR</h1>
                
                <p><a href="https://aws.amazon.com/ecr/pricing/">Amazon ECR Pricing Page</a></p>
<h2 id="summary">Summary</h2>
<p>Amazon Elastic Container Registry (ECR) is a fully managed container registry that allows you to store container images. You can create as many "Repositories" as you'd like that are free. As you push container "Images" to your repository, you're charged for the storage of these images which can acrue over time. Additionally, ECR charges different data transfer rates for private versus public repositories. </p>
<h2 id="pricing-dimensions">Pricing Dimensions</h2>
<ul>
<li><strong>Container Image Storage</strong>: Amazon ECR charges a rate per month for the amount of storage per GB you store for container images. </li>
<li><strong>Data Transfer</strong>: Amazon ECR charges different rates for data transfer from public and private repositories. </li>
</ul>
<h2 id="storage-costs-per-ecr-repository">Storage Costs per ECR Repository</h2>
<p>Determining the cost per Container Repository can be a lot of effort, especially if you have a large quantity of images. To calculate the storage cost per container repository:</p>
<ul>
<li>List all of your container images</li>
<li>Collect the image digest from each</li>
<li>Determine just the unique digests of the layers in your container repository</li>
<li>Get the size of each unique digest.</li>
</ul>
<p>If you prefer not to do this manually yourself, <a href="https://www.vantage.sh/">Vantage</a> will compute the size and corresponding cost of all repositories automatically when you connect an AWS account.</p>
<h2 id="lifecycle-policies">Lifecycle Policies</h2>
<p>ECR stores every container image you push to a registry by default. Over time, the storage of all of these images can add up. Amazon offers a primitive called a "Lifecycle Policy" that allows you to set conditions for having Amazon clean up images on your behalf. There are two types of lifeycle policies:</p>
<ul>
<li><strong>imageCountMoreThan</strong>: ECR allows you to define a certain number of images to retain and anything over that count will be cleaned up. For example if you set a Lifecycle Policy with a imageCountMoreThan value of 10, your most recent 10 images will always be kept.</li>
<li><strong>sinceImagePushed</strong>: ECR allows you to set lifecycle policies with a value of sinceImagePushed which has a value of a certain number of days. So for example if you have a Lifecycle Policy applied with a sinceImagePushed value of 7, ECR will delete images as often as they are older than 7 days. </li>
</ul>
<p><strong>Note</strong>: that when you apply a Lifecycle Policy, it is evaluated immediately. So if you have 500 images in a repositority and impose a lifeycle policy of 10 as soon as that policy is applied ECR will delete the 490 oldest images. </p>
<h3 id="example-imagecountmorethan-lifeycle-policy">Example <code>imageCountMoreThan</code> Lifeycle Policy</h3>
<p>Here's an example of how to impose a Lifeycle Policy via the AWS CLI using the value of imageCountMoreThan: </p>
<pre><code>aws ecr put-lifecycle-policy \
    --repository-name &quot;vantage/mcyolo&quot; \
    --lifecycle-policy-text &quot;file://policy.json&quot;

</code></pre>
<p>Where the content of the file for policy.json is the following:</p>
<pre><code>{
  &quot;rules&quot;: [
     {
       &quot;rulePriority&quot;: 1,
       &quot;description&quot;: &quot;Expire images over a count of 10&quot;,
       &quot;selection&quot;: {
         &quot;tagStatus&quot;: &quot;untagged&quot;,
         &quot;countType&quot;: &quot;imageCountMoreThan&quot;,
         &quot;countNumber&quot;: 10
       },
       &quot;action&quot;: {
         &quot;type&quot;: &quot;expire&quot;
       }
     }
  ]
}

</code></pre>
<h3 id="example-sinceimagepushed-lifeycle-policy">Example <code>sinceImagePushed</code> Lifeycle Policy</h3>
<p>Here's an example of how to impose a Lifeycle Policy via the AWS CLI using the value of sinceImagePushed: </p>
<pre><code>aws ecr put-lifecycle-policy \
    --repository-name &quot;vantage/mcyolo&quot; \
    --lifecycle-policy-text &quot;file://policy.json&quot;

</code></pre>
<p>Where the content of the file for policy.json is the following:</p>
<pre><code>{
  &quot;rules&quot;: [
     {
       &quot;rulePriority&quot;: 1,
       &quot;description&quot;: &quot;Expire images older than 14 days&quot;,
       &quot;selection&quot;: {
         &quot;tagStatus&quot;: &quot;untagged&quot;,
         &quot;countType&quot;: &quot;sinceImagePushed&quot;,
         &quot;countUnit&quot;: &quot;days&quot;,
         &quot;countNumber&quot;: 14
       },
       &quot;action&quot;: {
         &quot;type&quot;: &quot;expire&quot;
       }
     }
  ]
}

</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../ec2-other-pricing/" class="md-footer__link md-footer__link--prev" aria-label="Previous: EC2-Other" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              EC2-Other
            </div>
          </div>
        </a>
      
      
        
        <a href="../elasticache-pricing/" class="md-footer__link md-footer__link--next" aria-label="Next: ElastiCache" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              ElastiCache
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
    
  </body>
</html>